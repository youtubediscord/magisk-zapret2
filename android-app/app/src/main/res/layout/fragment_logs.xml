<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#202020">

    <!-- Tab Bar -->
    <com.google.android.material.tabs.TabLayout
        android:id="@+id/tabLayoutLogs"
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:background="#2D2D2D"
        app:tabIndicatorColor="#0078D4"
        app:tabIndicatorHeight="3dp"
        app:tabSelectedTextColor="#FFFFFF"
        app:tabTextColor="#808080"
        app:tabMode="fixed"
        app:tabGravity="fill"
        app:tabRippleColor="#400078D4">

        <com.google.android.material.tabs.TabItem
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Logcat" />

        <com.google.android.material.tabs.TabItem
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Output" />

        <com.google.android.material.tabs.TabItem
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Errors" />

    </com.google.android.material.tabs.TabLayout>

    <!-- Cmdline Card (Collapsible) -->
    <com.google.android.material.card.MaterialCardView
        android:id="@+id/cardCmdline"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="12dp"
        app:cardBackgroundColor="#2D2D2D"
        app:cardCornerRadius="8dp"
        app:cardElevation="2dp"
        app:strokeWidth="0dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <!-- Header (Clickable to Expand/Collapse) -->
            <LinearLayout
                android:id="@+id/layoutCmdlineHeader"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:padding="12dp"
                android:background="?android:attr/selectableItemBackground">

                <ImageView
                    android:id="@+id/iconCmdlineExpand"
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:src="@drawable/ic_expand_more"
                    app:tint="#808080"
                    android:layout_marginEnd="8dp" />

                <TextView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Current Command Line"
                    android:textColor="#FFFFFF"
                    android:textSize="14sp"
                    android:textStyle="bold" />

                <ImageView
                    android:id="@+id/iconCopyCmdline"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:src="@drawable/ic_copy"
                    app:tint="#808080"
                    android:padding="4dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="Copy command line" />

            </LinearLayout>

            <!-- Expandable Content -->
            <LinearLayout
                android:id="@+id/layoutCmdlineContent"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="gone"
                android:paddingStart="12dp"
                android:paddingEnd="12dp"
                android:paddingBottom="12dp">

                <HorizontalScrollView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:scrollbars="horizontal">

                    <TextView
                        android:id="@+id/textCmdline"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="nfqws --qnum=200 --dpi-desync=fake,split2 ..."
                        android:textColor="#4EC9B0"
                        android:textSize="12sp"
                        android:fontFamily="monospace"
                        android:background="#1E1E1E"
                        android:padding="8dp"
                        android:singleLine="true" />

                </HorizontalScrollView>

            </LinearLayout>

        </LinearLayout>

    </com.google.android.material.card.MaterialCardView>

    <!-- Log Content Area -->
    <com.google.android.material.card.MaterialCardView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_marginStart="12dp"
        android:layout_marginEnd="12dp"
        android:layout_marginBottom="12dp"
        app:cardBackgroundColor="#1E1E1E"
        app:cardCornerRadius="8dp"
        app:cardElevation="2dp"
        app:strokeWidth="0dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical">

            <!-- Log Filter Bar -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:background="#252525"
                android:padding="8dp">

                <com.google.android.material.textfield.TextInputLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    style="@style/Widget.Material3.TextInputLayout.OutlinedBox.Dense"
                    app:boxStrokeColor="#0078D4"
                    app:hintTextColor="#808080"
                    app:startIconDrawable="@drawable/ic_search"
                    app:startIconTint="#808080">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/editLogFilter"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:hint="Filter logs..."
                        android:textColor="#FFFFFF"
                        android:textColorHint="#808080"
                        android:textSize="14sp"
                        android:background="@android:color/transparent"
                        android:inputType="text" />

                </com.google.android.material.textfield.TextInputLayout>

                <com.google.android.material.checkbox.MaterialCheckBox
                    android:id="@+id/checkAutoScroll"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Auto-scroll"
                    android:textColor="#808080"
                    android:textSize="12sp"
                    android:checked="true"
                    app:buttonTint="#0078D4"
                    android:layout_marginStart="8dp" />

            </LinearLayout>

            <View
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:background="#404040" />

            <!-- Log ScrollView -->
            <ScrollView
                android:id="@+id/scrollLogs"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:fillViewport="true"
                android:scrollbars="vertical">

                <TextView
                    android:id="@+id/textLogs"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Waiting for logs...\n\nStart the service to see log output here."
                    android:textColor="#D4D4D4"
                    android:textSize="12sp"
                    android:fontFamily="monospace"
                    android:lineSpacingExtra="2dp"
                    android:padding="12dp"
                    android:textIsSelectable="true" />

            </ScrollView>

        </LinearLayout>

    </com.google.android.material.card.MaterialCardView>

    <!-- Bottom Action Buttons -->
    <com.google.android.material.card.MaterialCardView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:cardBackgroundColor="#2D2D2D"
        app:cardCornerRadius="0dp"
        app:cardElevation="8dp"
        app:strokeWidth="0dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="12dp"
            android:gravity="center">

            <!-- Refresh Button -->
            <com.google.android.material.button.MaterialButton
                android:id="@+id/buttonRefresh"
                android:layout_width="0dp"
                android:layout_height="48dp"
                android:layout_weight="1"
                android:layout_marginEnd="6dp"
                android:text="Refresh"
                android:textSize="14sp"
                style="@style/Widget.Material3.Button.OutlinedButton"
                app:cornerRadius="8dp"
                app:strokeColor="#0078D4"
                android:textColor="#0078D4"
                app:icon="@drawable/ic_refresh"
                app:iconGravity="textStart"
                app:iconTint="#0078D4"
                app:iconPadding="4dp" />

            <!-- Copy Button -->
            <com.google.android.material.button.MaterialButton
                android:id="@+id/buttonCopyLogs"
                android:layout_width="0dp"
                android:layout_height="48dp"
                android:layout_weight="1"
                android:layout_marginStart="6dp"
                android:layout_marginEnd="6dp"
                android:text="Copy"
                android:textSize="14sp"
                style="@style/Widget.Material3.Button.OutlinedButton"
                app:cornerRadius="8dp"
                app:strokeColor="#0078D4"
                android:textColor="#0078D4"
                app:icon="@drawable/ic_copy"
                app:iconGravity="textStart"
                app:iconTint="#0078D4"
                app:iconPadding="4dp" />

            <!-- Clear Button -->
            <com.google.android.material.button.MaterialButton
                android:id="@+id/buttonClearLogs"
                android:layout_width="0dp"
                android:layout_height="48dp"
                android:layout_weight="1"
                android:layout_marginStart="6dp"
                android:text="Clear"
                android:textSize="14sp"
                style="@style/Widget.Material3.Button.OutlinedButton"
                app:cornerRadius="8dp"
                app:strokeColor="#FF5252"
                android:textColor="#FF5252"
                app:icon="@drawable/ic_delete"
                app:iconGravity="textStart"
                app:iconTint="#FF5252"
                app:iconPadding="4dp" />

        </LinearLayout>

    </com.google.android.material.card.MaterialCardView>

</LinearLayout>
